diff -up vlc-0.8.6f/configure.ac.directfb vlc-0.8.6f/configure.ac
--- vlc-0.8.6f/configure.ac.directfb	2008-04-01 17:57:43.000000000 +0200
+++ vlc-0.8.6f/configure.ac	2008-04-01 17:57:52.000000000 +0200
@@ -3973,18 +3973,8 @@ AC_ARG_ENABLE(directfb,
   [  --enable-directfb       DirectFB support (default disabled)])
 if test "${enable_directfb}" = "yes"
 then
-  if test "${with_directfb}" = "no"
+  if test "${with_directfb}" = "yes"
   then
-    AC_CHECK_HEADER(directfb.h, have_directfb="true", have_directfb="false")
-    if test "${have_directfb}"= "true"
-    then
-        VLC_ADD_PLUGINS([directfb])
-        VLC_ADD_LDFLAGS([directfb],[-ldirectfb -lfusion -ldirect -lpthread -ljpeg -lz -ldl])
-        VLC_ADD_CPPFLAGS([directfb],[-I/usr/include/directfb -D_REENTRANT])
-    else
-        AC_MSG_ERROR([cannot find /usr/include/directfb headers, make sure directfb is installed on your system or use --disable-directfb])
-    fi
-  else
     CPPFLAGS_save="${CPPFLAGS}"
     CPPFLAGS="${CPPFLAGS} -I${with_directfb}/include"
     AC_CHECK_HEADER(directfb.h, have_directfb="true", have_directfb="false")
@@ -3998,6 +3988,16 @@ then
             VLC_ADD_LDFLAGS([directfb],[-L${with_directfb}/lib -ldirectfb -lfusion -ldirect -lpthread -ljpeg -lz -ldl])
         fi ],
         [ AC_MSG_ERROR([cannot find directfb headers in ${with_directfb}/include]) ])
+  else
+    PKG_CHECK_MODULES(DIRECTFB, directfb, [have_directfb="true"], [have_directfb="false"])
+    if test "${have_directfb}" = "true"
+    then
+        VLC_ADD_PLUGINS([directfb])
+        VLC_ADD_LDFLAGS([directfb],[${DIRECTFB_LIBS}])
+        VLC_ADD_CPPFLAGS([directfb],[${DIRECTFB_CFLAGS}])
+    else
+        AC_MSG_ERROR([cannot find /usr/include/directfb headers, make sure directfb is installed on your system or use --disable-directfb])
+    fi
   fi
 fi
 
